{"version":3,"sources":["webpack:///./src/app/page/mainmenu/discussionmenu/discussion-create/discussion-create.page.html","webpack:///./src/app/page/mainmenu/discussionmenu/discussion-create/discussion-create.page.scss","webpack:///./src/app/page/mainmenu/discussionmenu/discussion-create/discussion-create.page.ts","webpack:///./src/app/page/mainmenu/discussionmenu/discussion/discussion.module.ts","webpack:///./src/app/page/mainmenu/discussionmenu/discussion/discussion.page.html","webpack:///./src/app/page/mainmenu/discussionmenu/discussion/discussion.page.scss","webpack:///./src/app/page/mainmenu/discussionmenu/discussion/discussion.page.ts"],"names":[],"mappings":"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","file":"discussionmenu-discussion-discussion-module.js","sourcesContent":["module.exports = \"<ion-content padding>\\n  <div id=\\\"discussion-create-modal-btnclose\\\">\\n    <ion-icon name=\\\"close\\\" (click)=\\\"closeDiscussionCreate()\\\"></ion-icon>\\n  </div>\\n\\n  <ion-item>\\n    <ion-input type=\\\"text\\\" placeholder=\\\"Topic\\\" [(ngModel)]=\\\"txtTopic\\\"></ion-input>\\n  </ion-item>\\n\\n  <div id=\\\"discussion-create-modal-btncreate\\\">\\n    <ion-button (click)=\\\"createTopic()\\\">Create</ion-button>\\n  </div>\\n</ion-content>\\n\"","module.exports = \"#discussion-create-modal-btnclose {\\n  width: 100%;\\n  text-align: right;\\n  padding-top: 12px; }\\n  #discussion-create-modal-btnclose ion-icon {\\n    font-size: 24px; }\\n  #discussion-create-modal-btncreate {\\n  width: 100%;\\n  text-align: center;\\n  margin-top: 2vh; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZS9tYWlubWVudS9kaXNjdXNzaW9ubWVudS9kaXNjdXNzaW9uLWNyZWF0ZS9FOlxcd29ya3NwYWNlXFxBbmRyb2lkXFxsaW5ldXAoMDktMTgpL3NyY1xcYXBwXFxwYWdlXFxtYWlubWVudVxcZGlzY3Vzc2lvbm1lbnVcXGRpc2N1c3Npb24tY3JlYXRlXFxkaXNjdXNzaW9uLWNyZWF0ZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxXQUFXO0VBQ1gsaUJBQWlCO0VBQ2pCLGlCQUFpQixFQUFBO0VBSHJCO0lBS1EsZUFBZSxFQUFBO0VBSXZCO0VBQ0ksV0FBVztFQUNYLGtCQUFrQjtFQUNsQixlQUFlLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9wYWdlL21haW5tZW51L2Rpc2N1c3Npb25tZW51L2Rpc2N1c3Npb24tY3JlYXRlL2Rpc2N1c3Npb24tY3JlYXRlLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNkaXNjdXNzaW9uLWNyZWF0ZS1tb2RhbC1idG5jbG9zZSB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgcGFkZGluZy10b3A6IDEycHg7XG4gICAgaW9uLWljb24ge1xuICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgfVxufVxuXG4jZGlzY3Vzc2lvbi1jcmVhdGUtbW9kYWwtYnRuY3JlYXRlIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgbWFyZ2luLXRvcDogMnZoO1xufSJdfQ== */\"","import { Component, OnInit, Input } from '@angular/core';\nimport { ModalController, LoadingController } from '@ionic/angular';\nimport { FirebaseService } from 'src/app/services/firebase-service/firebase.service';\nimport { UserData } from '../../../interface/interface';\nimport { ShowtoastService } from 'src/app/services/showtoast/showtoast.service';\n\n@Component({\n  selector: 'app-discussion-create',\n  templateUrl: './discussion-create.page.html',\n  styleUrls: ['./discussion-create.page.scss'],\n})\nexport class DiscussionCreatePage implements OnInit {\n  private isFavoritePage = false;\n\n  txtTopic = '';\n  posterInfo: UserData = {};\n\n  constructor(\n      private modalCtrl: ModalController,\n      private firebaseService: FirebaseService,\n      private loadingCtrl: LoadingController,\n      private toastService: ShowtoastService\n  ) { }\n\n  ngOnInit() {\n    this.posterInfo = {};\n    this.getPosterInfo();\n  }\n\n  async getPosterInfo() {\n    const cuid = this.firebaseService.getUID();\n    const profileLoader = await this.loadingCtrl.create({\n      message: 'Loading...'\n    });\n    await profileLoader.present();\n    try {\n      const profileSnapshot = await this.firebaseService.getUserProfile(cuid);\n      this.posterInfo = profileSnapshot.val();\n      profileLoader.dismiss();\n    } catch (err) {\n      profileLoader.dismiss();\n      console.log(err);\n    }\n  }\n\n  async createTopic() {\n    const saveLoader = await this.loadingCtrl.create({\n      message: 'Please wait...'\n    });\n    await saveLoader.present();\n    const item = {\n      discussionid: '',\n      discussionname: this.txtTopic,\n      posterid: this.posterInfo.uid,\n      postername: this.posterInfo.fname,\n      createdat: null,\n    };\n    try {\n      item.discussionid = await this.firebaseService.addDiscussionTopic(item);\n      this.isFavoritePage = !this.isFavoritePage;\n      const strFavorites = localStorage.getItem('favDiscussion');\n      let arrFavorites = [];\n      if (!this.isFavoritePage) {\n        arrFavorites = strFavorites.split(',');\n        const favLocIndex = arrFavorites.findIndex(x => x == item.discussionid);\n        arrFavorites.splice(favLocIndex, 1);\n        localStorage.setItem('favDiscussion', arrFavorites.join(','));\n        this.firebaseService.addFavDiscussions(localStorage.getItem('favDiscussion'));\n      } else {\n        if (localStorage.getItem('favDiscussion') !== null && localStorage.getItem('favDiscussion') !== '') {\n          arrFavorites = strFavorites.split(',');\n          arrFavorites.push(item.discussionid);\n          localStorage.setItem('favDiscussion', arrFavorites.join(','));\n          this.firebaseService.addFavDiscussions(localStorage.getItem('favDiscussion'));\n        } else {\n          localStorage.setItem('favDiscussion', item.discussionid);\n          this.firebaseService.addFavDiscussions(localStorage.getItem('favDiscussion'));\n        }\n      }\n      saveLoader.dismiss();\n      this.toastService.showToast('Topic is created successfully!');\n      this.modalCtrl.dismiss(item);\n    } catch (err) {\n      saveLoader.dismiss();\n      this.toastService.showToast(err.message);\n      this.modalCtrl.dismiss(null);\n    }\n  }\n\n  closeDiscussionCreate() {\n    this.modalCtrl.dismiss(null);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\nimport { PipesModule } from 'src/app/pipes/pipes.module';\n\nimport { DiscussionPage } from './discussion.page';\nimport { DiscussionCreatePage } from '../discussion-create/discussion-create.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DiscussionPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PipesModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [DiscussionPage, DiscussionCreatePage],\n  entryComponents: [DiscussionCreatePage]\n})\nexport class DiscussionPageModule {}\n","module.exports = \"<ion-header no-border>\\n  <ion-toolbar>\\n    <ion-searchbar [(ngModel)]=\\\"searchKeyword\\\" (ionChange)=\\\"searchDiscussion()\\\"></ion-searchbar>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content padding>\\n  <div id=\\\"discussion-item-container\\\">\\n    <div class=\\\"discussion-item\\\" *ngFor=\\\"let result of arrResult\\\" (click)=\\\"onClickDiscussion(result.discussionid, result.discussionname)\\\">\\n      <div class=\\\"discussion-item-name\\\">\\n        <p>{{result.discussionname}}</p>\\n      </div>\\n      <img class=\\\"discussion-item-detail\\\" src=\\\"assets/imgs/icon/icon-left-arrow.svg\\\" />\\n    </div>\\n  </div>\\n</ion-content>\\n<ion-footer>\\n  <ion-toolbar>\\n    <ion-button (click)=\\\"addDiscussion()\\\">\\n      Add Discussion\\n      <ion-icon slot=\\\"end\\\" name=\\\"add\\\"></ion-icon>\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-footer>\"","module.exports = \"#discussion-item-container {\\n  margin-top: 3vh; }\\n\\n.discussion-item {\\n  position: relative;\\n  padding: 5px 10px;\\n  border-bottom: 1px solid #000; }\\n\\n.discussion-item-name p {\\n  color: #658696;\\n  font-weight: bold; }\\n\\n.discussion-item-detail {\\n  position: absolute;\\n  right: 10px;\\n  top: 50%;\\n  transform: translate(0, -50%);\\n  width: 14px; }\\n\\nion-footer ion-toolbar {\\n  text-align: center; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZS9tYWlubWVudS9kaXNjdXNzaW9ubWVudS9kaXNjdXNzaW9uL0U6XFx3b3Jrc3BhY2VcXEFuZHJvaWRcXGxpbmV1cCgwOS0xOCkvc3JjXFxhcHBcXHBhZ2VcXG1haW5tZW51XFxkaXNjdXNzaW9ubWVudVxcZGlzY3Vzc2lvblxcZGlzY3Vzc2lvbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxlQUFlLEVBQUE7O0FBR25CO0VBQ0ksa0JBQWtCO0VBQ2xCLGlCQUFpQjtFQUNqQiw2QkFBNkIsRUFBQTs7QUFHakM7RUFDSSxjQUFjO0VBQ2QsaUJBQWlCLEVBQUE7O0FBR3JCO0VBQ0ksa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxRQUFRO0VBQ1IsNkJBQTZCO0VBQzdCLFdBQVcsRUFBQTs7QUFJZjtFQUVRLGtCQUFrQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvcGFnZS9tYWlubWVudS9kaXNjdXNzaW9ubWVudS9kaXNjdXNzaW9uL2Rpc2N1c3Npb24ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2Rpc2N1c3Npb24taXRlbS1jb250YWluZXIge1xuICAgIG1hcmdpbi10b3A6IDN2aDtcbn1cblxuLmRpc2N1c3Npb24taXRlbSB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHBhZGRpbmc6IDVweCAxMHB4O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjMDAwO1xufVxuXG4uZGlzY3Vzc2lvbi1pdGVtLW5hbWUgcCB7XG4gICAgY29sb3I6ICM2NTg2OTY7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5kaXNjdXNzaW9uLWl0ZW0tZGV0YWlsIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgcmlnaHQ6IDEwcHg7XG4gICAgdG9wOiA1MCU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwgLTUwJSk7XG4gICAgd2lkdGg6IDE0cHg7XG59XG5cblxuaW9uLWZvb3RlciB7XG4gICAgaW9uLXRvb2xiYXIge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgfVxufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { LoadingController, ModalController, NavController } from '@ionic/angular';\n\n/**\n * import custom services\n */\nimport { FirebaseService } from 'src/app/services/firebase-service/firebase.service';\nimport { DiscussionCreatePage } from '../discussion-create/discussion-create.page';\n\n@Component({\n  selector: 'app-discussion',\n  templateUrl: './discussion.page.html',\n  styleUrls: ['./discussion.page.scss'],\n})\nexport class DiscussionPage implements OnInit {\n\n  private searchKeyword = '';\n  private arrDiscussions = [];\n  private arrResult = [];\n\n  constructor(\n    private loadingCtrl: LoadingController,\n    private modalCtrl: ModalController,\n    private firebaseService: FirebaseService,\n    private navCtrl: NavController,\n    ) {\n\n  }\n\n  ngOnInit() {\n\n  }\n\n  ionViewWillEnter() {\n    this.initPage();\n  }\n\n  async initPage() {\n    const discussionLoader = await this.loadingCtrl.create({\n      message: 'Loading...'\n    });\n    await discussionLoader.present();\n    const self = this;\n    try {\n      const discussioSnapshot = await this.firebaseService.getDiscussions();\n      self.arrDiscussions = [];\n      self.arrResult = [];\n      discussioSnapshot.forEach(function(childSnapshot) {\n        self.arrDiscussions.push({...childSnapshot.val()});\n      });\n      self.arrResult = self.arrDiscussions;\n      discussionLoader.dismiss();\n    } catch (err) {\n      discussionLoader.dismiss();\n      console.log(err);\n    }\n  }\n\n  searchDiscussion() {\n    if (this.searchKeyword != '') {\n      this.arrResult = this.arrDiscussions.filter(item => item.discussionname.toLowerCase().includes(this.searchKeyword.toLowerCase()));\n      console.log(this.arrResult);\n    } else {\n      this.arrResult = this.arrDiscussions;\n    }\n  }\n\n  onClickDiscussion(discussionid, discussiontitle) {\n    this.navCtrl.navigateForward('/discussion-detail/' + discussionid + '/' + discussiontitle + '/main/1');\n  }\n\n  async addDiscussion() {\n    const discussionCreateModal = await this.modalCtrl.create({\n      component: DiscussionCreatePage\n    });\n    await discussionCreateModal.present();\n    discussionCreateModal.onDidDismiss()\n      .then((data) => {\n        if (data.data != null) {\n          this.navCtrl.navigateForward('/discussion-detail/' + data.data.discussionid + '/' + data.data.discussionname + '/main/0');\n        }\n      });\n  }\n\n}\n"],"sourceRoot":""}