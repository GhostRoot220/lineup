{"version":3,"sources":["webpack:///./src/app/page/mainmenu/shopmenu/home-shop/home-shop.module.ts","webpack:///./src/app/page/mainmenu/shopmenu/home-shop/home-shop.page.html","webpack:///./src/app/page/mainmenu/shopmenu/home-shop/home-shop.page.scss","webpack:///./src/app/page/mainmenu/shopmenu/home-shop/home-shop.page.ts"],"names":[],"mappings":"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","file":"shopmenu-home-shop-home-shop-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HomeShopPage } from './home-shop.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild([{ path: '', component: HomeShopPage }])\n  ],\n  declarations: [HomeShopPage]\n})\nexport class HomeShopPageModule {}\n","module.exports = \"<ion-content no-padding>\\n  <div id=\\\"shop-search-bar\\\">\\n    <ion-searchbar color=\\\"white\\\" placeholder=\\\"Search\\\" no-padding [(ngModel)]=\\\"itemSearchQuery\\\" (ionChange)=\\\"searchItems()\\\"></ion-searchbar>\\n  </div>\\n\\n  <div id=\\\"shop-main-container\\\">\\n    <ion-segment [(ngModel)]=\\\"selectedSegment\\\" (ionChange)=\\\"segmentChanged()\\\">\\n      <ion-segment-button value=\\\"0\\\">\\n        <ion-label>All</ion-label>\\n      </ion-segment-button>\\n      <ion-segment-button value=\\\"1\\\">\\n        <ion-label>My Items</ion-label>\\n      </ion-segment-button>\\n      <ion-segment-button value=\\\"2\\\">\\n        <ion-label>Saved Items</ion-label>\\n      </ion-segment-button>\\n    </ion-segment>\\n\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col size=\\\"4\\\" *ngFor=\\\"let item of searchResults\\\">\\n          <div class=\\\"home-shop-item\\\" (click)=\\\"viewItemDetailPage(item.id)\\\">\\n            <img [src]=\\\"item.imgs&&item.imgs[0]?item.imgs[0]:''\\\" />\\n            <div class=\\\"home-shop-item-description\\\">\\n              <p>{{item.title}}</p>\\n            </div>\\n          </div>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </div>\\n</ion-content>\\n\\n<ion-footer>\\n  <ion-toolbar>\\n    <ion-button (click)=\\\"viewNewSurfboardPage()\\\">\\n      Post\\n    </ion-button>\\n  </ion-toolbar>\\n</ion-footer>\\n\"","module.exports = \"#shop-search-bar {\\n  display: flex;\\n  align-items: center;\\n  padding: 16px 10px;\\n  background-color: #84A1B3; }\\n\\nion-segment-button {\\n  font-size: 12px;\\n  flex: 1; }\\n\\n#home-shop-itemcontainer {\\n  padding: 10px; }\\n\\n#home-shop-itemcontainer ion-col {\\n    padding: 0 !important; }\\n\\n.home-shop-item {\\n  height: 28vw;\\n  overflow: hidden;\\n  position: relative; }\\n\\n.home-shop-item img {\\n    width: 100%;\\n    min-height: 100%; }\\n\\n.home-shop-item-description {\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  width: 100%;\\n  text-align: center;\\n  z-index: 2;\\n  background-color: rgba(0, 0, 0, 0.4); }\\n\\n.home-shop-item-description p {\\n    color: white;\\n    font-family: \\\"Open Sans Bold\\\"; }\\n\\nion-footer ion-toolbar {\\n  text-align: center; }\\n\\n#home-shop-btn-myitem {\\n  margin-left: 5vw; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZS9tYWlubWVudS9zaG9wbWVudS9ob21lLXNob3AvRTpcXHdvcmtzcGFjZVxcQW5kcm9pZFxcbGluZXVwKDA5LTE4KS9zcmNcXGFwcFxccGFnZVxcbWFpbm1lbnVcXHNob3BtZW51XFxob21lLXNob3BcXGhvbWUtc2hvcC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDSSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLGtCQUFrQjtFQUNsQix5QkFBeUIsRUFBQTs7QUFHN0I7RUFDSSxlQUFlO0VBQ2YsT0FBTyxFQUFBOztBQUdYO0VBQ0ksYUFBYSxFQUFBOztBQURqQjtJQUdRLHFCQUFxQixFQUFBOztBQUk3QjtFQUNJLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIsa0JBQWtCLEVBQUE7O0FBSHRCO0lBS1EsV0FBVztJQUNYLGdCQUFnQixFQUFBOztBQUl4QjtFQUNJLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsT0FBTztFQUNQLFdBQVc7RUFDWCxrQkFBa0I7RUFDbEIsVUFBVTtFQUNWLG9DQUFvQyxFQUFBOztBQVB4QztJQVNRLFlBQVk7SUFDWiw2QkFBNkIsRUFBQTs7QUFJckM7RUFFUSxrQkFBa0IsRUFBQTs7QUFJMUI7RUFDSSxnQkFBZ0IsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BhZ2UvbWFpbm1lbnUvc2hvcG1lbnUvaG9tZS1zaG9wL2hvbWUtc2hvcC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcbiNzaG9wLXNlYXJjaC1iYXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBwYWRkaW5nOiAxNnB4IDEwcHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzg0QTFCMztcbn1cblxuaW9uLXNlZ21lbnQtYnV0dG9uIHtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgZmxleDogMTtcbn1cblxuI2hvbWUtc2hvcC1pdGVtY29udGFpbmVyIHtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICAgIGlvbi1jb2wge1xuICAgICAgICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7XG4gICAgfVxufVxuXG4uaG9tZS1zaG9wLWl0ZW0ge1xuICAgIGhlaWdodDogMjh2dztcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBpbWcge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWluLWhlaWdodDogMTAwJTtcbiAgICB9XG59XG5cbi5ob21lLXNob3AtaXRlbS1kZXNjcmlwdGlvbiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJvdHRvbTogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB6LWluZGV4OiAyO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC40KTtcbiAgICBwIHtcbiAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICBmb250LWZhbWlseTogXCJPcGVuIFNhbnMgQm9sZFwiO1xuICAgIH1cbn1cblxuaW9uLWZvb3RlciB7XG4gICAgaW9uLXRvb2xiYXIge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgfVxufVxuXG4jaG9tZS1zaG9wLWJ0bi1teWl0ZW0ge1xuICAgIG1hcmdpbi1sZWZ0OiA1dnc7XG59Il19 */\"","import {Component, OnInit} from '@angular/core';\nimport {Router} from '@angular/router';\nimport {LoadingController, Events} from '@ionic/angular';\n\nimport {FirebaseService} from '../../../../services/firebase-service/firebase.service';\nimport {SurfBoard, UserData} from '../../../interface/interface';\n\n@Component({\n    selector: 'app-home-shop',\n    templateUrl: './home-shop.page.html',\n    styleUrls: ['./home-shop.page.scss'],\n})\nexport class HomeShopPage implements OnInit {\n\n    private itemSearchQuery = '';\n    private shopItems: SurfBoard[];\n    private searchResults: SurfBoard[];\n    private userInfo: UserData = {};\n    private boardLoader = null;\n\n    /**\n     * selected segments\n     *  0: All\n     *  1: My Items\n     *  2: Saved Items\n     */\n    private selectedSegment = '0';\n    private arrMyItems = [];\n    private arrMyFavItems = [];\n\n    constructor(\n        private router: Router,\n        private firebaseService: FirebaseService,\n        private loadingCtrl: LoadingController,\n        private event: Events\n    ) {\n        this.shopItems = [];\n        this.event.subscribe('onfavchange', data => {\n            this.initPage();\n        });\n    }\n\n    ngOnInit() {\n\n    }\n\n    ionViewWillEnter() {\n        this.initPage();\n    }\n\n    async initPage() {\n        this.shopItems = [];\n        this.searchResults = [];\n        this.arrMyItems = [];\n        this.arrMyFavItems = [];\n        this.selectedSegment = '0';\n        await this.getUserProfile();\n        this.getAllSurfBoards();\n    }\n\n    async getUserProfile() {\n        this.boardLoader = await this.loadingCtrl.create({\n            message: 'Loading...'\n        });\n        await this.boardLoader.present();\n        const uid = this.firebaseService.getUID();\n        try {\n            const userInfoSnapshot = await this.firebaseService.getUserProfile(uid);\n            this.userInfo = userInfoSnapshot.val();\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    async getAllSurfBoards() {\n        const self = this;\n        try {\n            const allBoardsSnapshot = await this.firebaseService.getAllSurfBoard();\n            allBoardsSnapshot.forEach(function (items) {\n                self.shopItems.push({...items.val(), id: items.key});\n            });\n            self.searchResults = self.shopItems;\n            this.boardLoader.dismiss();\n        } catch (err) {\n            console.log(err);\n            this.boardLoader.dismiss();\n        }\n    }\n\n    searchItems() {\n        const keyWord = this.itemSearchQuery.toLowerCase();\n        let arrItems = [];\n        if (this.selectedSegment === '0') {\n            arrItems = this.shopItems;\n        } else if (this.selectedSegment === '1') {\n            arrItems = this.arrMyItems;\n        } else if (this.selectedSegment === '2') {\n            arrItems = this.arrMyFavItems;\n        }\n        if (keyWord === '') {\n            this.searchResults = arrItems;\n        } else {\n            if (this.shopItems.length > 0) {\n                this.searchResults = [];\n                for (let i = 0; i < arrItems.length; i++) {\n                    const itemDescription = arrItems[i].title.toLowerCase();\n                    if (itemDescription.includes(keyWord) === true) {\n                        this.searchResults.push(arrItems[i]);\n                    }\n                }\n            }\n        }\n    }\n\n    viewNewSurfboardPage() {\n        this.router.navigateByUrl('/home-shop-newitem');\n    }\n\n    viewItemDetailPage(itemid) {\n        this.router.navigateByUrl('/shopitemdetail/' + itemid + '/shopmain');\n    }\n\n    segmentChanged() {\n        const arrUserFavItems = this.userInfo.favorite.products.split(',');\n        const uid = this.userInfo.uid;\n        if (this.selectedSegment === '0') {\n            this.searchResults = this.shopItems;\n        } else if (this.selectedSegment === '1') {\n            this.searchResults = this.shopItems.filter(x => x.ownerid === uid);\n            this.arrMyItems = this.searchResults;\n        } else if (this.selectedSegment === '2') {\n            this.searchResults = this.shopItems.filter(x => arrUserFavItems.indexOf(x.id) > -1);\n            this.arrMyFavItems = this.searchResults;\n        }\n    }\n\n}\n"],"sourceRoot":""}